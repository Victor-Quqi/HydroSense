; =================================================================
; ==                    通用基础配置                              ==
; =================================================================
[common_env_settings]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; --- 核心硬件配置 (针对 N16R8) ---
board_build.mcu = esp32s3
board_build.flash_size = 16MB
board_build.flash_mode = qio
board_build.flash_freq = 80m
board_build.psram_size = 8MB
board_build.psram_type = opi
board_build.filesystem = spiffs

; --- 添加库依赖 ---
lib_deps =
    bblanchon/ArduinoJson @ ^7.0.0
    zinggjm/GxEPD2 @ ^1.6.5
    adafruit/Adafruit GFX Library @ ^1.11.9
    lvgl/lvgl@~8.3.11

; --- 串口监视器配置 ---
monitor_speed = 115200


; =================================================================
; ==                        部署环境                              ==
; =================================================================
[env:hydrosense_esp32s3_n16r8]
extends = common_env_settings
upload_port = COM7
build_flags =
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COLOR_DEPTH=1
board_build.partitions = partitions_with_log.csv


; =================================================================
; ==                   硬件在环 (HIL) 测试环境                   ==
; =================================================================
[env:test]
extends = common_env_settings
build_flags =
    -DTEST_MODE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COLOR_DEPTH=1
board_build.partitions = partitions_with_log.csv