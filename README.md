# HydroSense - 能量自持型智能浇水系统

## 项目简介

HydroSense 是一个旨在实现**能量自持**、达成“永久续航”级别的智能植物养护终端。

项目的设计哲学融合了**极致的低功耗**与**高效的能量采集**。通过独特的“哨兵-指挥官”双核协同架构，系统在待机模式下的功耗被降至微安级别。同时，可热插拔的太阳能充电模块会在后台静默地补充能量，形成一个完美的能量闭环，使其特别适合需要长期独立运行的户外或离网场景。

## 核心技术

- **“哨兵-指挥官”双核协同架构**: 主处理器 (指挥官) 在绝大部分时间处于深度睡眠状态，由超低功耗协处理器 (ULP, 哨兵) 以纳瓦级功耗进行周期性环境监测。仅在必要时（如检测到土壤干燥），才唤醒主处理器执行浇水任务，从而极大降低了待机功耗。

- **全链路物理断电**: 系统中的所有非核心外设（如12V升压模块、传感器、墨水屏）都由独立的MOSFET开关在物理层面进行供电控制。在不使用时，它们的电源被彻底切断，实现了真正的零泄漏、零待机功耗。

- **硬件级启动安全**: 通过为电源开关配备强上拉电阻，确保了在主控芯片上电初始化的短暂“空窗期”内，所有外设均处于明确的关闭状态，防止了意外启动和潜在的硬件冲突。

- **模块化太阳能补给**: 太阳能充电系统被设计为一个可选、可热插拔的外部模块。这使得设备既可以在室内作为纯粹的超低功耗设备使用，也可以在户外连接太阳能板，升级为一个完全能量自持的系统。

## 工作流程

系统的运行遵循一个高度节能的事件驱动模型：

1.  **深度沉睡**: 在绝大多数时间里，系统处于功耗低于10微安的深度睡眠状态。
2.  **“哨兵”巡逻**: RTC定时器周期性地（例如每30分钟）仅唤醒ULP协处理器。ULP会短暂启动传感器、读取土壤湿度，然后立即关闭传感器。
3.  **决策与唤醒**: 如果湿度在正常范围，ULP直接返回休眠。如果湿度低于设定的阈值，ULP将唤醒主CPU“指挥官”。
4.  **“指挥官”行动**: 主CPU被唤醒后，将执行完整的浇水序列，包括打开水泵和电磁阀、浇水、然后关闭所有执行机构。任务完成后，主CPU立即返回深度睡眠状态，等待下一次唤醒。
